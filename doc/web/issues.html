<html>
<head>
<meta http-equiv=content-type content="text/html;  charset=ISO-8859-1">
<title>Flagstone Software :: Issues &amp; Bugs in Translate AS1</title>
<link rel="stylesheet" type="text/css" href="/flagstone.css">
<script language="JavaScript" src="/js/imageload.js"></script>
<script language="JavaScript" src="/js/imageswap.js"></script>
</head>

<body>
<script type='text/javascript'>function Go(){return}</script>
<script type="text/javascript" src="/js/menu_var.js"></script>
<script type="text/javascript" src="/js/menu_com.js"></script>
<noscript>Your browser does not support script</noscript>

<div class="page">

<div class="header">
<img src="/images/flagstone_header.gif" alt="Flagstone Software" width=760 height=77>
<table cellpadding="0" cellspacing="0" border="0" class="sitemenu">
<tr>
<td width=150 bgcolor="#9A1F31"><a href="/index.html" onmouseover="imageSwap('home', 'homeOn');" onmouseout="imageSwap('home', 'homeOff');"><img src="/images/home_off.gif" alt="[Home]" width=77 height=29 border=0 name="home"></a></td>
<td width=29><img src="/images/diagonal_divider.gif" alt="" width=29 height=29></td>
<td bgcolor="#C43F52"><div id='MenuPos' style='position:left; width:440; height:27;'><img src='/images/spacer.gif' width='440' height='27'></div></td>
<td bgcolor="#C43F52"><img src='/images/spacer.gif' width='141' height='27'></td>
</tr>
</table>
</div>

<div class="content">
<H1>Translate AS1: Known Issues &amp; Bugs</H1>

<P>Version:2.0.3<br/>Updated:1st October 2006</P>

<TABLE width="100%">

<THEAD>
<TR>
<TH>Current Issue</TH>
<TH>Status</TH>
<TH>Fix Due</TH>
</TR>
</THEAD>

<TBODY>

<TR>
<TD>1. Newline does not delimit statements.</TD>
<TD>Open</TD>
<TD>Open</TD>
</TR>

<TR>
<TD>2. updateAfterEvent() cannot be called with no arguments.</TD>
<TD>Open</TD>
<TD>2.0.4</TD>
</TR>

<TR>
<TD>3. duplicate definitions in event handlers.</TD>
<TD>Open</TD>
<TD>2.0.4</TD>
</TR>

</TBODY>
</TABLE>

<TABLE width="100%">

<THEAD>
<TR>
<TH>Recently Fixed</TH>
<TH>Status</TH>
<TH>Release</TH>
</TR>
</THEAD>

<TBODY>
<TR>
<TD>1. Variables with local scope are not supported.</TD>
<TD>Fixed</TD>
<TD>2.0.3</TD>
</TR>

<TR>
<TD>2. Accented Characters not supported</TD>
<TD>Fixed</TD>
<TD>2.0.3</TD>
</TR>

<TR>
<TD>3. Anonymous function arguments are not assigned to variables</TD>
<TD>Fixed</TD>
<TD>2.0.3</TD>
</TR>

<TR>
<TD>4. Incrementing object attributes fails</TD>
<TD>Fixed</TD>
<TD>2.0.3</TD>
</TR>

<TR>
<TD>5. random() function is not supported</TD>
<TD>Fixed</TD>
<TD>2.0.3</TD>
</TR>

<TR>
<TD>6. instanceof is not currently supported.</TD>
<TD>Fixed</TD>
<TD>2.0.2</TD>
</TR>

<TR>
<TD>7. delete operator is not currently supported.</TD>
<TD>Fixed</TD>
<TD>2.0.2</TD>
</TR>

<TR>
<TD>8. Multiple assignments are not supported.</TD>
<TD>Fixed</TD>
<TD>2.0.2</TD>
</TR>

</TBODY>
</TABLE>

<br/>

<h2>Current Issues</h2>

<H3>1. Newline does not delimit statements</H3>

<P>The parser in Macromedia Flash allows newline characters to delimit 
statements. The statements:

<pre>
    a = 1
    b = 2
</pre>
<P>are valid ActionScript however Translate requires explicit semi-colons to
terminate a statement, e.g.

<pre>
    a = 1;
    b = 2;
</pre>

<H4>Root Cause</H4>

<P>The parser rules recognize newlines as whitespace rather than as statement 
delimiters.</P>

<H4>Workaround</H4>

<P>There is no workaround. All statements must be terminated with a semi-colon. 
Block statements such as those which form the body of an if or for statement are
not affected.</P>

<H4>When will it be fixed?</H4>

<P>This is a tough one to fix. Several different ways of preprocessing the 
script to replace line-breaks with semi-colons have been examined. None gave 
simple or consistent results.</P>

<div class="hr"><hr/></div>

<H3>2. updateAfterEvent() cannot be called with no arguments.</H3>

<P>The built-in function, updateAfterEvent() cannot be used without passing an
argument. This is not correct.

<H4>Root Cause</H4>

<P>Translate performs some checking on the built-in Actionscript functions to 
ensure that they are being called correctly. The code is checking to see that
updateAfterEvent() is called with only one argument.</P>

<H4>Workaround</H4>

<P>Comment out (or delete) lines 4975-4980 in ASNode.java:

<pre>
//    else if (sValue.equals("updateAfterEvent"))
//    {
//        if (count != 1)
//            reportError("IncorrectArgumentCount", number);
//    }
</pre>

<H4>When will it be fixed?</H4>

<P>This error will be fixed in the next release due out at the end of October.</P>

<div class="hr"><hr/></div>

<H3>3. duplicate definitions in event handlers.</H3>

<P>When compiling the code for button and movie clip event handlers:

<pre>
    on(mouseDown)
    {
        function fn(x) {
           return getPropery(x)+1;
        }
        
        xLocation = fn("_x");
    }
    
    on (mouseUp)
    {
    	yLocation = _y + 1;
    }  
</pre>

<P>the definitions for functions and the table of strings defined in the handler
for mouseDown events will be repeated in the definition of the event handler 
for mouseUp events even though they are not used.</P>

<H4>Root Cause</H4>

<P>The root cause is a failure to empty the table of defined strings and 
function each time the code for an event handler is compiled.</P>

<H4>Workaround</H4>

<P>There is no simple workaround. The affect is only to increase the size of the
compiled code by including unused strings and funciton definitions. In an event 
handler, any function or string with the same name will simply overwrite the 
previous entry in the table so the code will be unaffected by any existing
entries.</P>

<H4>When will it be fixed?</H4>

<P>A fix is planned for release 2.0.4 due at the end of October 2006.</P>

<br/>

<H2>Recently Fixed</H2>

<H3>1. Variables with local scope are supported.</H3>

<P>Local variables arenow scoped correctly.</P>

<pre>
    var i = 1;

    if (i == 1) {
       var i = 0;
    }

    trace(i);
</pre>

<p>Will now print the correct value '1'.</p>

<div class="hr"><hr/></div>

<h3>2. Accented characters are supported.</h3>

<P>Non ASCII characters in strings no longer cause errors:

<PRE>
   var str = &quot;Il y a un probl&egrave;me&quot;;
</PRE>
   
<div class="hr"><hr/></div>

<h3>3. Anonymous function arguments are assigned to variables</H3>

<P>When an anonymous function is assigned to a variable then the arguments
passed to the function are correctly bound to the function variables:

<pre>
   foo = function(x) {
       trace(&quot;x=&quot; + x)   
   };

   foo(&quot;hello&quot;);
</pre>

<p>Produces the result:</p>

<pre>
   &quot;x=hello&quot;   
</pre>

<div class="hr"><hr/></div>

<H3>4. Object attributes can now be used with unary operators</H3>

<P>UNary operators such as pre/post increment and pre/post descrement can now
be used with object attributes.</P>

<pre>
    obj.foo++;
    ++obj.foo;
</pre>
 
<div class="hr"><hr/></div>

<H3>5. random() function now supported.</H3>

<P>The function random() can now be used in scripts.</p> 

<div class="hr"><hr/></div>

<h3>6. instanceof operator is now supported.</H3>

<P>The instanceof operator can now be used to test class membership</P>

<pre>
    var a = new MyClass();

    if (a instanceof MyClass) {
        ...
    }
</pre>

<div class="hr"><hr/></div>

<h3>7. delete operator is now supported.</h3>

<P>The delete operator can be used to delete an object:</P>

<pre>
    var a = new MyClass();

    delete a;
</pre>

<div class="hr"><hr/></div>

<H3>8. Multiple assignment statements now supported.</H3>

<P>The value of more than one variable can be set in an assignment statement:</P>

<pre>
    var a = b = c = 1;
</pre>

</div>
<div class="footer">
Copyright 2001-2006, Flagstone Software. All rights reserved. 
Please read our <a href="/privacy.html">Privacy Policy</a> and 
<a href="/legal.html">Legal Notices</a>.
</div>
</div>

</body>
</html>

