<html>
<head>
<title>Release Notes for Translate AS1, Version 2.0.2</title>
<style type="text/CSS">
<!--
a:link { text-decoration: none; }
a:visited { color: darkred; text-decoration: none; }
a:active { text-decoration: none; }
a:hover { color: #000066; text-decoration: none; }

h1 { font-size: 140%; background-color: darkgray; padding: 3px 10px; }
h2 { font-size: 120%; background-color: darkgray; padding: 3px 10px; }
h3 { font-size: 110%; margin-bottom: 0px; }

div.section { margin-left: 10px; margin-right: 10px; }

p { margin-top: 0px; }
pre { font-size: 90%; }
ul { margin-left: 10px; }
ul ol { margin-left: 10px; }
table { margin-left: 10px;}
-->
</style>
</head>
<body>

<h1>Release Notes for Translate AS1, Version 2.0.2.</h1>

<div class="section">
<P>This release contains updates to the ActionScript grammar and a large number
of bug fixes. The project was also restructured to use TestNG and the full 
set of test suites and ActionScript code samples used to test the package 
are included in the release.</P>

</div><!-- section -->

<ul>
<li>Bug Fixes     
<ol>     
<li><a href="#fix1">Delete operator is now implemented.</a></li>     
<li><a href="#fix2">Delete function is now implemented.</a></li>     
<li><a href="#fix3">Instanceof operator is now implemented.</a></li>     
<li><a href="#fix4">Array elements can now be used with unary operators.</a></li>     
<li><a href="#fix5">Floating-point literals are now supported.</a></li>     
<li><a href="#fix6">Correct event code are generated for On statements.</a></li>     
<li><a href="#fix7">Multiple assignment statements are implemented correctly.</a></li>     
<li><a href="#fix8">Control characters \b,\f,\n,\r,\t can be used in strings.</a></li>     
<li><a href="#fix9">Compiled On statements are now encoded correctly.</a></li>     
<li><a href="#fix10">#include directive now searches for files correctly.</a></li>     
</ol> 
</li> 
<li>Internal Class Changes 
<ol>     
<li><a href="#int1">Code generation matches Macromedia code better.</a></li>     
</ol> 
</li> 
<li>Package Changes 
<ol>     
<li><a href="#package1">Added test suites using TestNG.</a></li>     
<li><a href="#package2">Simplified package structure.</a></li>     
<li><a href="#package3">Datasheets are now generated using Javadoc.</a></li>     
</ol> 
</li> 
</ul>  
</div><!-- section -->

<h2>Bug Fixes</H2>  

<div class="section">
<h3><a name="fix1">1. Delete operator is now implemented.</a></h3>  

<P>The delete operator:</P>

<pre>
    a = new Number(1);
    
    delete a;
</pre>

<p>can now be used in scripts.</p>

<h3><a name="fix2">2. Delete function is now implemented.</a></h3>  

<P>The delete function:</P>

<pre>
    a = new Number(1);
    
    delete(a);
</pre>

<p>Now generates code correctly. It was supported in the grammar but the byte
codes generated by the compiler were incomplete.</p>

<h3><a name="fix3">3. Instanceof operator is now implemented.</a></h3>  

<P>The intanceof operator:</P>

<pre>
    a = new Number(1);
    
    if (a instanceof Number)
    {
        ...
    }
</pre>

<p>can now be used in scripts.</p>

<h3><a name="fix4">4. Array elements can now be used with unary operators.</a></h3>  

<p>Using unary operators such as:

<pre>
    a[i]++;
</pre>

<p>now generates the correct byte codes.</p>

<h3><a name="fix5">5. Floating-point literals are now supported.</a></h3>  

<p>Floating point literals are now fully supported. Previously releases only 
supported integers.</p>

<h3><a name="fix6">6. Correct event code are generated for On statements.</a></h3>  

<p>When an On statement was compiled the names of events passed to the statement
are converted into event flags in a data structure wrapping the compiled code.
The codes used to represent DragOver and ReleaseOutside events were swapped. The
flags are now presented in the correct order.</p>

<h3><a name="fix7">7. Multiple assignment statements are implemented correctly.</a></h3>  

<p>This fix is more of an internal change. When a nultiple assignment statement
is compiled the values from the previous assignment in the sequence is now 
stored in one of the Flash Player's internal registers so it can be reused. It
is not clear whether this value can ever be used however the compiled code was 
updated so it matches the code generated by the Macromedia authoring tool.</p>

<h3><a name="fix8">8. Control characters \b,\f,\n,\r,\t can be used in strings.</a></h3>  

<p>Character literals representing "well-known" control characters can now be
included in strings. Previously the parser in the compiler would throw an
exception when any were detected.</p>

<h3><a name="fix9">9. Compiled On statements are now encoded correctly.</a></h3>  

<p>The data structure that wraps an On statement was not encoded correctly so
any ActionScript written to provide behaviour for buttons would cause an error
in the Flash Player. The problem occured when more than one On statement was 
used in a script and was caused by an incorrect offset to the next On statement's
actions.</P>

<h3><a name="fix10">10. #include directive now searches for files correctly.</a></h3>  

<p>A list of directories can be specified to create a search path when files are
#include'd. In previous releases the path was not being constructed correctly so
the files were never found.</p> 

</div><!-- section -->

<h2>Internal Changes</H2>  

<div class="section">
<h3><a name="int1">1. Code generation matches Macromedia code better.</a></h3>

<P>The bytes codes generated by the compiler now matches the code generated 
using Macromedia's Flash authoring tool more closely. This was done to simplify
and speed up the process of testing - where text dumps of the compiled 
Actionscript are currently compared visually.</p>

</div><!-- section -->

<h2>Package Changes</H2>  

<div class="section">

<h3><a name="package1">1. Added test suites using TestNG.</a></h3>

<P>TestNG is now being used for performing all testing on the classes. Test suites
are included along a reference set of ActionScript code to fully test the code
generated by the compiler.</p>

<p>The test suites make use of the TextDump tool from the Transform framework
which is used to generate string representations of the reference ActionScript
and the code generated by the compiler so they can be compared.</P>

<h3><a name="package2">2. Simplified package structure.</a></h3>

<p>Classes are now compiled and packaged using a single ANT build file, build.xml. 
The previous version contained references to build files that were used internally 
to the projectand not normally part of the distribution.</P>

<p>The build targets have also been simplified and made more flexible. A single
target 'build' is not used to compile optimized versions of the framework and package
the classes in a JAR file. For more detailed control, targets for each step in the 
build process are included. See the ANT file build.xml for more details.</P>

<p>Some of files such as README.txt and LICENCE.txt have been moved around to
simplify the package structure and generally tidy things up.</p> 

<h3><a name="package3">3. Datasheets are now generated using Javadoc.</a></h3>  

<p>Javadoc is now the preferred way of generating the class datasheets. Previously 
doxygen was used. While doxygen is an excellent tool the goal of simplifying the
package structure made Javadoc easier to use and avoided the need to download 
and maintain another application.</P>

</div><!-- section -->

<h2>Additional Information</h2>

<div class="section">
<p>For Further Information please contact:</p>

<p>Stuart MacKay<br/>
Flagstone Software Ltd.<br/>
92 High Street<br/>
Wick, Caithness KW1 4LY<br/>
Scotland<br/><br/>
www.flagstonesoftware.com
</div><!-- section -->
</body>
</html>
